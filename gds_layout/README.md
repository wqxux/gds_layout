# MEMS IMU Mask Layout Design Tool

## 项目简介

这是一个用于MEMS IMU芯片掩膜版（mask layout）设计的Python程序，具备以下特性：

- **参数化设计**：所有mask的关键参数都可通过IMU性能参数（如灵敏度、带宽、噪声、量程等）理论计算得到
- **20种可自定义layer**：支持自定义、命名和管理20种工艺层（layer），每层可独立编辑
- **直接生成GDS文件**：程序可直接输出标准GDSII格式文件，便于流片
- **GUI界面**：提供友好的图形用户界面，支持参数输入和结果可视化

## 项目结构

```
gds_layout/
├── requirements.txt          # 项目依赖
├── main.py                  # 主程序入口
├── README.md               # 项目说明
├── src/                    # 源代码目录
│   ├── __init__.py
│   ├── theory/            # 理论计算模块
│   │   ├── __init__.py
│   │   └── imu_theory.py  # IMU理论计算
│   ├── layout/            # 版图生成模块
│   │   ├── __init__.py
│   │   ├── layer_definitions.py    # 层定义
│   │   └── accelerometer_layout.py # 加速度计版图
│   └── gui/               # GUI界面模块
│       ├── __init__.py
│       └── main_window.py # 主窗口
└── examples/              # 示例文件
    └── consumer_accelerometer.py
```

## 安装依赖

```bash
pip install -r requirements.txt
```

## 运行程序

```bash
python main.py
```

## 功能特性

### 1. 理论计算模块

- **IMU性能参数**：灵敏度、带宽、噪声密度、量程、分辨率、功耗
- **物理公式推导**：基于MEMS理论，包含弹簧刚度、自然频率、阻尼比等计算
- **参数优化**：通过迭代优化算法，根据性能要求自动调整几何参数
- **设计验证**：检查制造约束，如最小线宽、最小间距、吸合电压等

### 2. 版图生成模块

- **20种标准层**：包含结构层、刻蚀层、金属层、特殊层等
- **消费级加速度计设计**：完整的MEMS结构，包括质量块、弹簧、锚点、电极等
- **制造规范**：符合标准MEMS制造工艺要求
- **GDSII输出**：直接生成标准GDSII格式文件

### 3. GUI界面

- **参数输入**：支持手动输入和预设参数选择
- **实时计算**：后台线程进行理论计算和版图生成
- **结果展示**：显示计算参数和设计信息
- **文件导出**：支持GDS文件和参数文件导出

## 使用示例

### 消费级加速度计设计

程序提供了四种预设参数：

1. **消费级加速度计**
   - 灵敏度：100 mV/g
   - 带宽：1000 Hz
   - 噪声密度：50 μg/√Hz
   - 量程：10 g

2. **工业级加速度计**
   - 灵敏度：200 mV/g
   - 带宽：500 Hz
   - 噪声密度：20 μg/√Hz
   - 量程：20 g

3. **汽车级加速度计**
   - 灵敏度：150 mV/g
   - 带宽：2000 Hz
   - 噪声密度：30 μg/√Hz
   - 量程：50 g

4. **高精度加速度计**
   - 灵敏度：500 mV/g
   - 带宽：100 Hz
   - 噪声密度：5 μg/√Hz
   - 量程：5 g

## 技术细节

### 理论计算

程序基于以下物理公式进行参数计算：

1. **自然频率**：f_n = (1/2π) * √(k/m)
2. **弹簧刚度**：k = 4 * E * I / L³
3. **灵敏度**：S = (ε₀ * A * V) / (d² * k)
4. **热机械噪声**：S_x² = (4 * k_B * T * Q) / (m * ω₀³)
5. **吸合电压**：V_pi = √(8 * k * d³) / (27 * ε₀ * A)

### 制造约束

程序自动检查以下制造约束：

- 最小线宽：2 μm
- 最小间距：3 μm
- 吸合电压安全系数：>1.5
- 材料属性：单晶硅

### 版图结构

生成的版图包含以下组件：

- **质量块**：中心质量块，带减重孔
- **弹簧**：四根悬臂梁弹簧
- **锚点**：四个固定锚点
- **电极**：四个检测电极
- **金属布线**：连接电极到焊盘
- **通孔**：层间连接
- **对准标记**：四个角对准标记
- **切割线**：芯片边界
- **密封环**：芯片密封
- **保护环**：静电保护
- **文字标记**：设计信息

## 扩展功能

程序支持以下扩展：

1. **其他MEMS器件**：陀螺仪、压力传感器等
2. **更多工艺层**：可自定义更多层定义
3. **DRC检查**：集成设计规则检查
4. **版图可视化**：集成版图查看器
5. **批量生成**：支持批量参数生成

## 注意事项

1. 确保安装了所有依赖包
2. 理论计算基于简化模型，实际应用需要更精确的仿真
3. 生成的GDS文件需要经过DRC检查
4. 制造前需要与代工厂确认工艺参数

## 许可证

本项目采用MIT许可证。 